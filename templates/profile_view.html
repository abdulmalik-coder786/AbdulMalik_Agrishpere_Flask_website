{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
  <div class="row">
    <div class="col-md-4">
      <div class="card text-center">
        {% if user.profile_picture %}
          <img src="{{ url_for('static', filename=user.profile_picture) }}" class="card-img-top img-fluid" alt="Profile Picture">
        {% else %}
          <img src="{{ url_for('static', filename='images/default-profile.png') }}" class="card-img-top img-fluid" alt="Default Profile">
        {% endif %}
        <div class="card-body">
          <h4 class="card-title">{{ user.name }}</h4>
          <p class="text-muted mb-1">{{ user.role|capitalize }}</p>
          <p class="text-muted small">Member since {{ user.created_at.strftime('%b %d, %Y') if user.created_at else 'N/A' }}</p>

          <div class="d-grid gap-2">
            <a href="{{ url_for('profile.edit_profile') }}" class="btn btn-outline-primary btn-sm">Edit Profile</a>
            {% if not user.profile_complete %}
              <a href="{{ url_for('profile.complete_profile') }}" class="btn btn-success btn-sm">Complete Profile</a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-8">
      <div class="card">
        <div class="card-header bg-light">
          <h5 class="mb-0">Profile Details</h5>
        </div>
        <div class="card-body">
          <dl class="row">
            <dt class="col-sm-3">Email</dt>
            <dd class="col-sm-9">{{ user.email }}</dd>

            <dt class="col-sm-3">Phone</dt>
            <dd class="col-sm-9">{{ user.phone or 'Not provided' }}</dd>

            <dt class="col-sm-3">Location</dt>
            <dd class="col-sm-9">{{ user.location or 'Not provided' }}</dd>

            <dt class="col-sm-3">Address</dt>
            <dd class="col-sm-9">{{ user.address or 'Not provided' }}</dd>

            <dt class="col-sm-3">Date of Birth</dt>
            <dd class="col-sm-9">{{ user.date_of_birth.strftime('%Y-%m-%d') if user.date_of_birth else 'Not provided' }}</dd>

            <dt class="col-sm-3">Gender</dt>
            <dd class="col-sm-9">{{ user.gender or 'Not provided' }}</dd>

            <dt class="col-sm-3">Bio</dt>
            <dd class="col-sm-9">{{ user.bio or 'Not provided' }}</dd>
          </dl>

          <!-- Role-specific details -->
          {% if user.role == 'farmer' %}
          <h6 class="mt-3">Farm Information</h6>
          <dl class="row">
            <dt class="col-sm-3">Farm Size</dt>
            <dd class="col-sm-9">{{ user.farm_size or 'Not provided' }}</dd>

            <dt class="col-sm-3">Crop Types</dt>
            <dd class="col-sm-9">{{ user.crop_types or 'Not provided' }}</dd>

            <dt class="col-sm-3">Farming Method</dt>
            <dd class="col-sm-9">{{ user.farming_method or 'Not provided' }}</dd>
          </dl>
          {% elif user.role == 'vendor' %}
          <h6 class="mt-3">Business Information</h6>
          <dl class="row">
            <dt class="col-sm-3">Business Name</dt>
            <dd class="col-sm-9">{{ user.business_name or 'Not provided' }}</dd>

            <dt class="col-sm-3">Vendor Type</dt>
            <dd class="col-sm-9">{{ user.vendor_type or 'Not provided' }}</dd>

            <dt class="col-sm-3">Product Categories</dt>
            <dd class="col-sm-9">{{ user.product_categories or 'Not provided' }}</dd>

            <dt class="col-sm-3">Delivery Areas</dt>
            <dd class="col-sm-9">{{ user.delivery_areas or 'Not provided' }}</dd>
          </dl>
          {% elif user.role == 'consultant' %}
          <h6 class="mt-3">Professional Information</h6>
          <dl class="row">
            <dt class="col-sm-3">Expertise</dt>
            <dd class="col-sm-9">{{ user.expertise or 'Not provided' }}</dd>

            <dt class="col-sm-3">Qualifications</dt>
            <dd class="col-sm-9">{{ user.qualifications or 'Not provided' }}</dd>

            <dt class="col-sm-3">Experience</dt>
            <dd class="col-sm-9">{{ user.experience_years or 'Not provided' }} years</dd>

            <dt class="col-sm-3">Availability</dt>
            <dd class="col-sm-9">{{ user.availability or 'Not provided' }}</dd>
          </dl>
          {% elif user.role == 'customer' %}
          <h6 class="mt-3">Preferences</h6>
          <dl class="row">
            <dt class="col-sm-3">Interests</dt>
            <dd class="col-sm-9">{{ user.interests or 'Not provided' }}</dd>

            <dt class="col-sm-3">Preferred Contact</dt>
            <dd class="col-sm-9">{{ user.preferred_contact or 'Not provided' }}</dd>
          </dl>
          {% endif %}

        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
