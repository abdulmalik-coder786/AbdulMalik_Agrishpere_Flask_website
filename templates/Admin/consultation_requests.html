{% extends "Admin/base.html" %}

{% block admin_content %}
<div class="d-flex justify-content-between align-items-center pt-3 pb-2 mb-3 border-bottom">
  <h1 class="h2">Consultation Requests</h1>
</div>

<div class="card shadow">
  <div class="card-body">
    {% if requests %}
    <div class="table-responsive">
      <table class="table table-hover">
        <thead class="table-light">
          <tr>
            <th>ID</th>
            <th>Client</th>
            <th>Consultant</th>
            <th>Topic</th>
            <th>Status</th>
            <th>Requested</th>
          </tr>
        </thead>
        <tbody>
          {% for r in requests %}
          <tr>
            <td>{{ r.id }}</td>
            <td>{{ r.client.email if r.client else r.client_id }}</td>
            <td>{{ r.consultant.name if r.consultant else r.consultant_id }}</td>
            <td>{{ r.topic }}</td>
            <td>{{ r.status }}</td>
            <td>{{ r.created_at.strftime('%Y-%m-%d') }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <p class="text-muted">No consultation requests</p>
    {% endif %}
  </div>
</div>
{% endblock %}
