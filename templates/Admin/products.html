{% extends "Admin/base.html" %}

{% block admin_content %}
<div class="d-flex justify-content-between align-items-center pt-3 pb-2 mb-3 border-bottom">
  <h1 class="h2">Product Management</h1>
  <a href="{{ url_for('admin.manage_products') }}" class="btn btn-sm btn-outline-secondary">Refresh</a>
</div>

<form class="row g-2 mb-3" method="get">
  <div class="col-auto">
    <input class="form-control" name="q" placeholder="Search product" value="{{ q or '' }}">
  </div>
  <div class="col-auto">
    <select name="category" class="form-select">
      <option value="">All categories</option>
      {% for c in categories %}
      <option value="{{ c }}" {% if category==c %}selected{% endif %}>{{ c }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-auto">
    <select name="status" class="form-select">
      <option value="">Any status</option>
      <option value="active" {% if status=='active' %}selected{% endif %}>Active</option>
      <option value="disabled" {% if status=='disabled' %}selected{% endif %}>Disabled</option>
    </select>
  </div>
  <div class="col-auto">
    <button class="btn btn-primary">Filter</button>
  </div>
</form>

<div class="card shadow">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead class="table-light">
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Vendor</th>
            <th>Category</th>
            <th>Price</th>
            <th>Stock</th>
            <th>Active</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for p in products %}
          <tr>
            <td>{{ p.id }}</td>
            <td>{{ p.name }}</td>
            <td>{{ p.vendor.name if p.vendor else 'Unknown' }}</td>
            <td>{{ p.category or '-' }}</td>
            <td>{{ p.price }}</td>
            <td>{{ p.quantity }}</td>
            <td>{{ 'Yes' if p.is_active else 'No' }}</td>
            <td>
              <a href="{{ url_for('admin.edit_product', product_id=p.id) }}" class="btn btn-sm btn-outline-primary">Edit</a>
              <form method="post" action="{{ url_for('admin.toggle_product', product_id=p.id) }}" style="display:inline">
                <button class="btn btn-sm btn-outline-secondary">Toggle</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
